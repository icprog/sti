<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Stanford Timing Interface: Client: src/edu/stanford/atom/sti/client/comm/io/DummyTimingClient.java Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.3 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="namespaces.html"><span>Namespaces</span></a></li>
    <li><a href="annotated.html"><span>Classes</span></a></li>
    <li class="current"><a href="files.html"><span>Files</span></a></li>
  </ul>
</div>
<h1>src/edu/stanford/atom/sti/client/comm/io/DummyTimingClient.java</h1><a href="DummyTimingClient_8java.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment"> * Minimalistic CORBA client.  Resolves a ModeHandler object from the </span>
<a name="l00003"></a>00003 <span class="comment"> * naming service.  </span>
<a name="l00004"></a>00004 <span class="comment"> * &lt;strikeout&gt;Currently the server IP and port are hard coded (jhogan2:2809)!&lt;/strikeout&gt;</span>
<a name="l00005"></a>00005 <span class="comment"> * Currently the port is hard-coded to the default omniORB NameServer port 2809</span>
<a name="l00006"></a>00006 <span class="comment"> * and the host is also hard-coded; these are in two static String attributes at</span>
<a name="l00007"></a>00007 <span class="comment"> * the beginning of the class. Changing them there affects it everywhere necessary.</span>
<a name="l00008"></a>00008 <span class="comment"> */</span>
<a name="l00009"></a>00009 
<a name="l00010"></a><a class="code" href="namespaceedu_1_1stanford_1_1atom_1_1sti_1_1client_1_1comm_1_1io.html">00010</a> <span class="keyword">package </span>edu.stanford.atom.sti.client.comm.io;
<a name="l00011"></a>00011 
<a name="l00012"></a>00012 <span class="keyword">import</span> edu.stanford.atom.sti.client.comm.corba.*;
<a name="l00013"></a>00013 <span class="keyword">import</span> org.omg.CosNaming.*;
<a name="l00014"></a>00014 <span class="keyword">import</span> org.omg.CosNaming.NamingContextPackage.*;
<a name="l00015"></a>00015 <span class="keyword">import</span> org.omg.CORBA.*;
<a name="l00016"></a>00016 
<a name="l00021"></a><a class="code" href="classedu_1_1stanford_1_1atom_1_1sti_1_1client_1_1comm_1_1io_1_1DummyTimingClient.html">00021</a> <span class="keyword">public</span> <span class="keyword">class </span><a class="code" href="classedu_1_1stanford_1_1atom_1_1sti_1_1client_1_1comm_1_1io_1_1DummyTimingClient.html">DummyTimingClient</a> {
<a name="l00022"></a>00022 
<a name="l00027"></a><a class="code" href="classedu_1_1stanford_1_1atom_1_1sti_1_1client_1_1comm_1_1io_1_1DummyTimingClient.html#f6460e39c78b1b1a0e15285fe7696cc4">00027</a>     <span class="keyword">static</span> String <a class="code" href="classedu_1_1stanford_1_1atom_1_1sti_1_1client_1_1comm_1_1io_1_1DummyTimingClient.html#f6460e39c78b1b1a0e15285fe7696cc4">hostAddr</a> = <span class="stringliteral">"171.64.58.36"</span>;
<a name="l00028"></a><a class="code" href="classedu_1_1stanford_1_1atom_1_1sti_1_1client_1_1comm_1_1io_1_1DummyTimingClient.html#4e73e4836d32b0b30d18dc8ec6cc56fe">00028</a>     <span class="keyword">static</span> String <a class="code" href="classedu_1_1stanford_1_1atom_1_1sti_1_1client_1_1comm_1_1io_1_1DummyTimingClient.html#4e73e4836d32b0b30d18dc8ec6cc56fe">corbaServerPort</a> = <span class="stringliteral">"2809"</span>;
<a name="l00029"></a>00029     
<a name="l00030"></a><a class="code" href="classedu_1_1stanford_1_1atom_1_1sti_1_1client_1_1comm_1_1io_1_1DummyTimingClient.html#f2c1f9cf90f1e14bdbe067835ae54028">00030</a>     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classedu_1_1stanford_1_1atom_1_1sti_1_1client_1_1comm_1_1io_1_1DummyTimingClient.html#f2c1f9cf90f1e14bdbe067835ae54028">main</a>(String[] args) {
<a name="l00031"></a>00031 
<a name="l00032"></a>00032         <span class="keywordflow">try</span> {
<a name="l00033"></a>00033             String[] extendedArgs = {<span class="stringliteral">"-ORBInitialPort"</span>, <a class="code" href="classedu_1_1stanford_1_1atom_1_1sti_1_1client_1_1comm_1_1io_1_1DummyTimingClient.html#4e73e4836d32b0b30d18dc8ec6cc56fe">corbaServerPort</a>, <span class="stringliteral">"-ORBInitialHost"</span>, <a class="code" href="classedu_1_1stanford_1_1atom_1_1sti_1_1client_1_1comm_1_1io_1_1DummyTimingClient.html#f6460e39c78b1b1a0e15285fe7696cc4">hostAddr</a>};
<a name="l00034"></a>00034             <span class="comment">// create and initialize the ORB</span>
<a name="l00035"></a>00035             ORB orb = ORB.init(extendedArgs, null);
<a name="l00036"></a>00036             <a class="code" href="classedu_1_1stanford_1_1atom_1_1sti_1_1client_1_1comm_1_1io_1_1DummyTimingClient.html#29ddeed387cb6e2fb06862950607748b">getFromParser</a>(orb);
<a name="l00037"></a>00037             <a class="code" href="classedu_1_1stanford_1_1atom_1_1sti_1_1client_1_1comm_1_1io_1_1DummyTimingClient.html#fc8023f2190c73a778efea8c3695c240">getFromModeHandler</a>(orb);
<a name="l00038"></a>00038         } <span class="keywordflow">catch</span> (Exception e) {
<a name="l00039"></a>00039             System.out.println(<span class="stringliteral">"ERROR : "</span> + e);
<a name="l00040"></a>00040             e.printStackTrace(System.out);
<a name="l00041"></a>00041         }
<a name="l00042"></a>00042     }
<a name="l00043"></a>00043 
<a name="l00053"></a><a class="code" href="classedu_1_1stanford_1_1atom_1_1sti_1_1client_1_1comm_1_1io_1_1DummyTimingClient.html#29ddeed387cb6e2fb06862950607748b">00053</a>     <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classedu_1_1stanford_1_1atom_1_1sti_1_1client_1_1comm_1_1io_1_1DummyTimingClient.html#29ddeed387cb6e2fb06862950607748b">getFromParser</a>(ORB orb) {
<a name="l00054"></a>00054         org.omg.CORBA.Object parserObj = orb.string_to_object(
<a name="l00055"></a>00055                     <span class="stringliteral">"corbaname::"</span> + <a class="code" href="classedu_1_1stanford_1_1atom_1_1sti_1_1client_1_1comm_1_1io_1_1DummyTimingClient.html#f6460e39c78b1b1a0e15285fe7696cc4">hostAddr</a> + <span class="stringliteral">":"</span> + <a class="code" href="classedu_1_1stanford_1_1atom_1_1sti_1_1client_1_1comm_1_1io_1_1DummyTimingClient.html#4e73e4836d32b0b30d18dc8ec6cc56fe">corbaServerPort</a> + 
<a name="l00056"></a>00056                     <span class="stringliteral">"#Timing_Server.Context/Parser.Object"</span>);
<a name="l00057"></a>00057         
<a name="l00058"></a>00058         <a class="code" href="interfaceedu_1_1stanford_1_1atom_1_1sti_1_1client_1_1comm_1_1corba_1_1Parser.html">Parser</a> cParse = <a class="code" href="classedu_1_1stanford_1_1atom_1_1sti_1_1client_1_1comm_1_1corba_1_1ParserHelper.html">ParserHelper</a>.narrow(parserObj);
<a name="l00059"></a>00059 
<a name="l00060"></a>00060         System.out.println(<span class="stringliteral">"Parsed File: "</span> + cParse.<a class="code" href="interfaceedu_1_1stanford_1_1atom_1_1sti_1_1client_1_1comm_1_1corba_1_1ParserOperations.html#33cb06bc81ab3dba7c12d075c996d2a4">mainFile</a>().toString());
<a name="l00061"></a>00061         java.lang.String[] newArray = cParse.<a class="code" href="interfaceedu_1_1stanford_1_1atom_1_1sti_1_1client_1_1comm_1_1corba_1_1ParserOperations.html#33b299481128b881e2496f4571614f73">files</a>();
<a name="l00062"></a>00062 
<a name="l00063"></a>00063         <span class="keywordflow">if</span> (newArray.length &gt; 0) {
<a name="l00064"></a>00064             <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i &lt; newArray.length; i++){
<a name="l00065"></a>00065                 System.out.println(<span class="stringliteral">"File #"</span> + i + <span class="stringliteral">": "</span> + newArray[i]);
<a name="l00066"></a>00066             }
<a name="l00067"></a>00067         }
<a name="l00068"></a>00068         
<a name="l00069"></a>00069         org.omg.CORBA.Object controlObj = orb.string_to_object(
<a name="l00070"></a>00070                 <span class="stringliteral">"corbaname::"</span> + <a class="code" href="classedu_1_1stanford_1_1atom_1_1sti_1_1client_1_1comm_1_1io_1_1DummyTimingClient.html#f6460e39c78b1b1a0e15285fe7696cc4">hostAddr</a> + <span class="stringliteral">":"</span> + <a class="code" href="classedu_1_1stanford_1_1atom_1_1sti_1_1client_1_1comm_1_1io_1_1DummyTimingClient.html#4e73e4836d32b0b30d18dc8ec6cc56fe">corbaServerPort</a> + 
<a name="l00071"></a>00071                 <span class="stringliteral">"#Timing_Server.Context/Control.Object"</span>);
<a name="l00072"></a>00072         <a class="code" href="interfaceedu_1_1stanford_1_1atom_1_1sti_1_1client_1_1comm_1_1corba_1_1Control.html">Control</a> control = <a class="code" href="classedu_1_1stanford_1_1atom_1_1sti_1_1client_1_1comm_1_1corba_1_1ControlHelper.html">ControlHelper</a>.narrow(controlObj);
<a name="l00073"></a>00073             
<a name="l00074"></a>00074         System.out.println(<span class="stringliteral">"Testing Control Error Message: "</span> + control.<a class="code" href="interfaceedu_1_1stanford_1_1atom_1_1sti_1_1client_1_1comm_1_1corba_1_1ControlOperations.html#55b7a89c4320d8f7edb168b25a6df3f3">errMsg</a>());
<a name="l00075"></a>00075         
<a name="l00076"></a>00076         System.out.println(<span class="stringliteral">"\nChannels: "</span>);
<a name="l00077"></a>00077 
<a name="l00078"></a>00078         <a class="code" href="classedu_1_1stanford_1_1atom_1_1sti_1_1client_1_1comm_1_1corba_1_1TChannel.html">TChannel</a>[] structSeq = cParse.<a class="code" href="interfaceedu_1_1stanford_1_1atom_1_1sti_1_1client_1_1comm_1_1corba_1_1ParserOperations.html#c552ce10f6add6da8ba5850c0ee048e7">channels</a>();
<a name="l00079"></a>00079         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;structSeq.length; i++)
<a name="l00080"></a>00080         {
<a name="l00081"></a>00081             System.out.println(<span class="stringliteral">"Channel "</span> + structSeq[i].channel);
<a name="l00082"></a>00082             System.out.println(<span class="stringliteral">"Board Type: "</span> + structSeq[i].board.boardType);
<a name="l00083"></a>00083             System.out.println(<span class="stringliteral">"Board Address: "</span> + structSeq[i].board.address);
<a name="l00084"></a>00084             System.out.println(<span class="stringliteral">"Module Type: "</span> + structSeq[i].board.moduleType);
<a name="l00085"></a>00085         }
<a name="l00086"></a>00086 
<a name="l00087"></a>00087         System.out.println(<span class="stringliteral">"\nEvents: "</span>);
<a name="l00088"></a>00088         <a class="code" href="classedu_1_1stanford_1_1atom_1_1sti_1_1client_1_1comm_1_1corba_1_1TEvent.html">TEvent</a>[] evtSeq = cParse.<a class="code" href="interfaceedu_1_1stanford_1_1atom_1_1sti_1_1client_1_1comm_1_1corba_1_1ParserOperations.html#16a44d222c6391e224a730037e126739">events</a>();
<a name="l00089"></a>00089         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;evtSeq.length; i++)
<a name="l00090"></a>00090         {
<a name="l00091"></a>00091             System.out.println(<span class="stringliteral">"Channel: "</span> + evtSeq[i].channel);
<a name="l00092"></a>00092             System.out.println(<span class="stringliteral">"Time: "</span> + evtSeq[i].time);
<a name="l00093"></a>00093             System.out.println(<span class="stringliteral">"File #: "</span> + evtSeq[i].pos.file);
<a name="l00094"></a>00094             System.out.println(<span class="stringliteral">"Line #: "</span> + evtSeq[i].pos.line);
<a name="l00095"></a>00095             <span class="comment">/*System.out.println("Value String: " + evtSeq[i].value.stringVal());</span>
<a name="l00096"></a>00096 <span class="comment">            System.out.println("Value Number: " + evtSeq[i].value.number());</span>
<a name="l00097"></a>00097 <span class="comment">            System.out.println("Amplitude: " + evtSeq[i].value.triplet().ampl);</span>
<a name="l00098"></a>00098 <span class="comment">            System.out.println("Frequency: " + evtSeq[i].value.triplet().freq);</span>
<a name="l00099"></a>00099 <span class="comment">            System.out.println("Phase: " + evtSeq[i].value.triplet().phase);*/</span>
<a name="l00100"></a>00100         }    
<a name="l00101"></a>00101     }
<a name="l00102"></a>00102  
<a name="l00112"></a><a class="code" href="classedu_1_1stanford_1_1atom_1_1sti_1_1client_1_1comm_1_1io_1_1DummyTimingClient.html#fc8023f2190c73a778efea8c3695c240">00112</a>     <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classedu_1_1stanford_1_1atom_1_1sti_1_1client_1_1comm_1_1io_1_1DummyTimingClient.html#fc8023f2190c73a778efea8c3695c240">getFromModeHandler</a>(ORB orb) {
<a name="l00113"></a>00113     org.omg.CORBA.Object modeHandlerObj = orb.string_to_object(
<a name="l00114"></a>00114                 <span class="stringliteral">"corbaname::"</span> + <a class="code" href="classedu_1_1stanford_1_1atom_1_1sti_1_1client_1_1comm_1_1io_1_1DummyTimingClient.html#f6460e39c78b1b1a0e15285fe7696cc4">hostAddr</a> + <span class="stringliteral">":"</span> + <a class="code" href="classedu_1_1stanford_1_1atom_1_1sti_1_1client_1_1comm_1_1io_1_1DummyTimingClient.html#4e73e4836d32b0b30d18dc8ec6cc56fe">corbaServerPort</a> + 
<a name="l00115"></a>00115                 <span class="stringliteral">"#Timing_Server.Context/ModeHandler.Object"</span>);
<a name="l00116"></a>00116     <a class="code" href="interfaceedu_1_1stanford_1_1atom_1_1sti_1_1client_1_1comm_1_1corba_1_1ModeHandler.html">ModeHandler</a> modeHandle = <a class="code" href="classedu_1_1stanford_1_1atom_1_1sti_1_1client_1_1comm_1_1corba_1_1ModeHandlerHelper.html">ModeHandlerHelper</a>.narrow(modeHandlerObj);
<a name="l00117"></a>00117     <span class="keywordflow">if</span> (modeHandle.<a class="code" href="interfaceedu_1_1stanford_1_1atom_1_1sti_1_1client_1_1comm_1_1corba_1_1ModeHandlerOperations.html#945fc40844dcae5207c694c4de101049">requestPending</a>()) {
<a name="l00118"></a>00118         System.out.println(modeHandle.<a class="code" href="interfaceedu_1_1stanford_1_1atom_1_1sti_1_1client_1_1comm_1_1corba_1_1ModeHandlerOperations.html#b1b649471efc7868a6af9e539f733842">requesterName</a>().toString());
<a name="l00119"></a>00119     }
<a name="l00120"></a>00120     }
<a name="l00121"></a>00121 }
</pre></div><hr size="1"><address style="text-align: right;"><small>Generated on Thu May 22 16:31:44 2008 for Stanford Timing Interface: Client by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.3 </small></address>
</body>
</html>
